<!DOCTYPE html>
<html>
<head>
  <title>Bookmarklet Test</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
    .bookmarklet { background: #6366f1; color: white; padding: 16px 32px; border-radius: 8px;
                    text-decoration: none; display: inline-block; margin: 20px 0; cursor: move; }
    code { background: #f0f0f0; padding: 2px 6px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Simple Test Bookmarklet</h1>

  <h2>Test 1: Basic Alert</h2>
  <a href="javascript:(function(){alert('Bookmarklet works!')})();" class="bookmarklet">Test Alert</a>

  <h2>Test 2: Extract Title</h2>
  <a href="javascript:(function(){var t=document.querySelector('h1');if(t){alert('Title: '+t.textContent)}else{alert('No h1 found')}})();" class="bookmarklet">Test Title</a>

  <h2>Test 3: Reuters Detection</h2>
  <a href="javascript:(function(){var isReuters=window.location.hostname.indexOf('reuters')>=0;alert('Is Reuters: '+isReuters+'\nHostname: '+window.location.hostname)})();" class="bookmarklet">Test Reuters</a>

  <h2>Test 4: Full Extraction (Minimal)</h2>
  <a href="javascript:(function(){try{var t=document.querySelector('h1')||document.querySelector('title');var ps=document.querySelectorAll('p');var txt=[];for(var i=0;i<Math.min(5,ps.length);i++){txt.push(ps[i].textContent.trim())}var result=t.textContent+'\n\n'+txt.join('\n\n');localStorage.setItem('rss_article_content',JSON.stringify({content:result,timestamp:Date.now()}));alert('Extracted '+result.length+' chars\n\nFirst 100:\n'+result.substring(0,100))}catch(e){alert('Error: '+e.message)}})();" class="bookmarklet">Test Extract</a>

  <h2>Full Bookmarklet V2 (Working)</h2>
  <a href="javascript:(function(){try{var t=document.querySelector('h1')||document.querySelector('title');var c='',n=null;var s=['article','main','[role=article]','.content'];for(var i=0;i<s.length;i++){n=document.querySelector(s[i]);if(n&&n.textContent.length>300)break}if(!n)n=document.body;var ps=n.querySelectorAll('p');var txt=[];for(var j=0;j<ps.length;j++){var p=ps[j].textContent.trim();if(p.length>30)txt.push(p)}c=txt.join('\n\n');if(c.length<200&&window.location.hostname.indexOf('reuters')>=0){var rps=document.querySelectorAll('[data-testid*=paragraph],[data-testid*=body],p');var rt=[];for(var m=0;m<rps.length;m++){var x=rps[m].textContent.trim();if(x.length>40&&x.indexOf('Sign up')<0&&x.indexOf('Register')<0)rt.push(x)}if(rt.length>=5)c=rt.join('\n\n')}if(c.length<100)c=n.textContent.trim().substring(0,5000);var r='--- '+t.textContent.trim()+' ---\nSource: '+window.location.hostname+'\nURL: '+window.location.href+'\n\n'+c+'\n---\n';localStorage.setItem('rss_article_content',JSON.stringify({content:r,timestamp:Date.now()}));navigator.clipboard.writeText(r).catch(function(){});try{if(window.opener&&!window.opener.closed)window.opener.postMessage({type:'ARTICLE_CONTENT',content:r},'*')}catch(e){}alert('âœ… Extracted '+r.length+' characters\n\nSaved to localStorage and clipboard.\nGo back to RSS Reader!')}catch(e){alert('âŒ Error: '+e.message+'\n\nLine: '+e.lineNumber)}})();" class="bookmarklet">ðŸ“„ Extract Article (Simple)</a>

  <h2>Instructions:</h2>
  <ol>
    <li>Drag the "Extract Article (Simple)" button to your bookmarks bar</li>
    <li>Go to any article page (like Reuters)</li>
    <li>Click the bookmarklet</li>
    <li>You should see an alert with the character count</li>
  </ol>

  <h2>Sample Content for Testing:</h2>
  <h1>Test Article Title</h1>
  <p>This is the first paragraph of test content. It should be extracted by the bookmarklet.</p>
  <p>This is the second paragraph with more content to extract.</p>
  <p>Third paragraph here with additional test content.</p>
  <p>Fourth paragraph to ensure we have enough content.</p>
  <p>Fifth paragraph for good measure.</p>
</body>
</html>
